import { trpc } from '../utils/trpc';

// Simple service to test TRPC connection
export class VisitorAnalyticsSimpleService {
  async testConnection() {
    try {
      // Test with a known working router first
      const userStats = await trpc.adminUserStatistics.getUserStatistics.query();
      console.log('✅ adminUserStatistics works:', userStats);

      // Test client visitor stats which should also work
      const publicStats = await trpc.clientVisitorStats.getPublicStats.query({ days: 7 });
      console.log('✅ clientVisitorStats works:', publicStats);

      return { success: true, userStats, publicStats };
    } catch (error) {
      console.error('❌ TRPC connection test failed:', error);
      return { success: false, error: error.message };
    }
  }
}

export const visitorAnalyticsSimpleService = new VisitorAnalyticsSimpleService();